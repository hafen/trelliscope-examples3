<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <div>
      <img
        width="400px"
        id="img1"
        src="displays/gapminder_websockets/panels/Africa_Algeria.png"
      />
    </div>
    <script>
      "use strict";

      let socket = new WebSocket("ws://127.0.0.1:8080");

      socket.onopen = function (e) {
        console.log("[open] Connection established");
        console.log("Sending to server");
        socket.send(1);
      };

      socket.onmessage = function (event) {
        // alert(`[message] Data received from server: ${event.data}`);
        console.log("event", event);
        document.getElementById("img1").src = event.data;
      };

      socket.onclose = function (event) {
        if (event.wasClean) {
          console.log(
            `[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`
          );
        } else {
          // e.g. server process killed or network down
          // event.code is usually 1006 in this case
          console.log("[close] Connection died");
        }
      };

      socket.onerror = function (error) {
        alert(`[error]`);
      };
    </script>
  </body>
</html>
